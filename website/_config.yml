# Jekyll Configuration for Caxton GitHub Pages Site
# Migrated from static site to maintain identical design

# Site settings
title: Caxton
subtitle: Multi-Agent Orchestration Platform
description: >-
  WebAssembly isolation. Observable by design. Production-ready from day one.
  Build resilient multi-agent systems with < 50Î¼s overhead.

url: "https://jwilger.github.io"
baseurl: "/caxton"

# GitHub repository information
repository: jwilger/caxton
github_username: jwilger

# Build settings
markdown: kramdown
highlighter: rouge
permalink: pretty
timezone: UTC

# Kramdown and Rouge configuration
kramdown:
  input: GFM
  syntax_highlighter: rouge
  syntax_highlighter_opts:
    css_class: 'highlight'
    span:
      line_numbers: false
    block:
      line_numbers: false
      start_line: 1

# Rouge configuration
rouge:
  css_class: 'highlight'

# Jekyll plugins for GitHub Pages compatibility
plugins:
  - jekyll-feed
  - jekyll-sitemap
  - jekyll-seo-tag
  - jekyll-relative-links
  - jekyll-optional-front-matter
  - jekyll-readme-index
  - jekyll-titles-from-headings
  - jekyll-paginate-v2

# ADR Collection Configuration
collections:
  adrs:
    output: true
    permalink: /adr/:name/
    sort_by: date

# Collection defaults
defaults:
  - scope:
      path: ""
      type: "posts"
    values:
      layout: "post"
  - scope:
      path: ""
      type: "adrs"
    values:
      layout: "adr"
      sitemap: true
  - scope:
      path: "docs"
    values:
      layout: "documentation"
      sitemap: true

# Sass configuration to match current Catppuccin theme
sass:
  sass_dir: _sass
  style: compressed

# Exclude files from processing (simplified since website is isolated)
exclude:
  - Gemfile
  - Gemfile.lock
  - node_modules
  - vendor/bundle/
  - vendor/cache/
  - vendor/gems/
  - vendor/ruby/

# Include files that would normally be excluded
include: [_adrs/]

# Pagination configuration for ADRs
pagination:
  enabled: true
  per_page: 10
  permalink: '/page/:num/'
  title: ':title'
  limit: 0
  sort_field: 'date'
  sort_reverse: true

# SEO and metadata
author:
  name: John Wilger
  email: john@johnwilger.com

# Social media and external links
social:
  github: https://github.com/jwilger/caxton

# Jekyll-feed configuration
feed:
  path: atom.xml

# Security
webrick:
  headers:
    X-Frame-Options: DENY
    X-Content-Type-Options: nosniff
    X-XSS-Protection: "1; mode=block"

# Performance optimizations
compress_html:
  clippings: all
  comments: all
  endings: html5
  startings: [html, head, body]
  blanklines: false
  profile: false

# Custom site data for ADR features
adr:
  # ADR timeline configuration (log4brains-inspired)
  timeline:
    enabled: true
    position: left
    collapsible: true

  # ADR search configuration
  search:
    enabled: true
    provider: lunr
    index_content: true
    placeholder: "Search ADRs..."

  # ADR status options
  statuses:
    - proposed
    - accepted
    - deprecated
    - superseded

  # ADR categorization
  categories:
    - Architecture
    - Technology
    - Process
    - Security
    - Performance

# Custom navigation for main site
navigation:
  main:
    - title: Features
      url: "#features"
    - title: Architecture
      url: "#architecture"
    - title: Get Started
      url: "#getting-started"
    - title: API Docs
      url: "/doc/caxton/"
    - title: ADRs
      url: "/adr/"
    - title: Documentation
      url: "/docs/"
    - title: GitHub
      url: "https://github.com/jwilger/caxton"
      external: true

# Feature flags for progressive enhancement
features:
  adr_carousel: true
  adr_timeline: true
  adr_search: true
  dark_mode_only: true
  animations: true
