---
description: Respond to PR feedback and address review comments using pr-manager agent
argument-hint: [PR number or leave empty to use current branch PR]
allowed-tools: Task
---

# Respond to PR Review

**SPARC Coordinator Role**: This command operates as a pure orchestrator, delegating all actual work to specialized subagents. The coordinator MUST NOT perform any direct git, GitHub, or code operations.

## Delegation Strategy

The coordinator delegates to appropriate subagents based on the type of work needed:

- **pr-manager**: Handles all GitHub PR operations (reading comments, posting responses, updating PR status)
- **implementer**: Makes code changes following TDD discipline (Red-Green-Refactor)
- **test-hardener**: Strengthens tests if review feedback suggests gaps
- **expert**: Provides architectural guidance for complex feedback

## Process

1. Delegate to pr-manager to read and analyze all PR comments
2. Based on feedback type, coordinate with appropriate subagents:
   - Code changes â†’ implementer (with TDD discipline)
   - Test improvements â†’ test-hardener
   - Architecture concerns â†’ expert
   - GitHub operations â†’ pr-manager
3. Relay information between subagents as needed
4. Ensure pr-manager responds to comments with proper attribution

## Comment Response Format

All responses to PR comments MUST use this format:

```markdown
<!-- Generated by Claude Code -->
**ðŸ¤– Claude Code**: {Your response addressing the specific comment}

{If making code changes, explain what you're doing and why}

*This comment was generated automatically by Claude Code on behalf of the repository maintainer. Please direct questions about this automation to the repository owner.*
```

When using GraphQL API for complex comment operations, remember to triple-quote the body content:
```bash
gh api graphql -f query='...' -f input='{"body":"""<!-- Generated by Claude Code -->
**ðŸ¤– Claude Code**: Response content here"""}'
```

## Change Implementation Delegation

When reviews request code changes, delegate to implementer with these requirements:
1. Follow strict TDD discipline (Red-Green-Refactor)
2. Create focused commits with descriptive messages
3. Run full test suite before completion
4. Coordinate with pr-manager to update PR comments after changes

## Safety Guidelines

**For Coordinator:**
- NEVER perform direct git, GitHub, or code operations
- ONLY use Task tool to delegate to subagents
- Relay information between subagents as needed
- Present subagent results to user for approval

**For Subagents (via delegation):**
- Never mark PR as ready-for-review (pr-manager responsibility)
- Always attribute responses to Claude Code (pr-manager responsibility)
- Make minimal, focused changes only (implementer responsibility)
- Verify all tests pass before completion (implementer responsibility)
- Ask coordinator for clarification on ambiguous feedback

## Example Usage

```
/sparc:review 42
```
or
```
/sparc:review  # uses current branch PR
```
